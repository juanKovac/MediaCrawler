<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创作者分析 - MediaCrawler Web</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="bi bi-robot"></i>
                MediaCrawler Web
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">首页</a>
                <a class="nav-link" href="/tasks">任务管理</a>
                <a class="nav-link" href="/data">数据查看</a>
                <a class="nav-link active" href="/creators">创作者分析</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h4 class="mb-0">
                            <i class="bi bi-people-fill"></i>
                            创作者数据分析
                        </h4>
                        <button class="btn btn-light btn-sm" onclick="refreshCreators()">
                            <i class="bi bi-arrow-clockwise"></i>
                            刷新
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="creatorsContainer">
                            <!-- 创作者列表将在这里动态加载 -->
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">加载中...</span>
                                </div>
                                <p class="mt-2">正在加载创作者数据...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 创作者详情模态框 -->
    <div class="modal fade" id="creatorModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">创作者详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- 创作者基本信息 -->
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">
                                        <i class="bi bi-person-circle"></i>
                                        基本信息
                                    </h6>
                                </div>
                                <div class="card-body" id="creatorInfo">
                                    <!-- 创作者基本信息将在这里显示 -->
                                </div>
                            </div>
                        </div>
                        <!-- 笔记列表 -->
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="bi bi-journal-text"></i>
                                        笔记列表
                                    </h6>
                                    <span class="badge bg-primary" id="notesCount">0</span>
                                </div>
                                <div class="card-body notes-list-container">
                                    <div id="notesList">
                                        <!-- 笔记列表将在这里显示 -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 笔记详情模态框 -->
    <div class="modal fade" id="noteModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">笔记详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="noteDetail">
                    <!-- 笔记详情将在这里显示 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" id="openNoteBtn">
                        <i class="bi bi-box-arrow-up-right"></i>
                        打开原链接
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 图片轮播模态框 -->
    <div class="modal fade" id="imageCarouselModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0 position-relative">
                    <!-- 页码计数器 -->
                    <div class="image-counter-top">
                        <span id="imageCounter" class="fw-bold">1 / 1</span>
                    </div>
                    <div id="imageCarousel" class="carousel slide" data-bs-ride="false">
                        <div class="carousel-inner" id="carouselInner">
                            <!-- 轮播图片将在这里动态加载 -->
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#imageCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">上一张</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#imageCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">下一张</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentCreatorId = null;
        let currentNoteUrl = null;
        let currentImageList = []; // 当前笔记的图片列表

        // 页面加载完成后获取创作者数据
        document.addEventListener('DOMContentLoaded', function() {
            loadCreators();
        });

        // 加载创作者列表
        function loadCreators() {
            fetch('/api/creators')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayCreators(data.creators);
                    } else {
                        showError('加载创作者数据失败: ' + data.message);
                    }
                })
                .catch(error => {
                    showError('网络错误: ' + error.message);
                });
        }

        // 显示创作者列表
        function displayCreators(creators) {
            const container = document.getElementById('creatorsContainer');
            
            if (creators.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-inbox" style="font-size: 3rem; color: #6c757d;"></i>
                        <h5 class="mt-3 text-muted">暂无创作者数据</h5>
                        <p class="text-muted">请先运行创作者爬取任务来获取数据</p>
                    </div>
                `;
                return;
            }

            let html = '<div class="row">';
            creators.forEach(creator => {
                const avatar = creator.avatar || 'https://via.placeholder.com/80x80?text=头像';
                const nickname = creator.nickname || '未知用户';
                const desc = creator.desc || '暂无简介';
                const noteCount = creator.note_count || 0;
                const fans = creator.fans || 0;
                const follows = creator.follows || 0;
                const interaction = creator.interaction || 0;
                const location = creator.ip_location || '未知';
                
                // 截取简介，避免过长
                const shortDesc = desc.length > 50 ? desc.substring(0, 50) + '...' : desc;
                
                html += `
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card h-100 creator-card" onclick="showCreatorDetail('${creator.user_id}')" style="cursor: pointer;">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <img src="${avatar}" alt="头像" class="rounded-circle me-3" width="60" height="60" onerror="this.src='https://via.placeholder.com/60x60?text=头像'">
                                    <div class="flex-grow-1">
                                        <h6 class="card-title mb-1">${nickname}</h6>
                                        <small class="text-muted">
                                            <i class="bi bi-geo-alt"></i> ${location}
                                        </small>
                                        <div class="text-muted" style="font-size: 0.75em;">
                                            <i class="bi bi-clock"></i> 更新: ${creator.data_update_time || '未知'}
                                        </div>
                                    </div>
                                </div>
                                <p class="card-text text-muted small" style="height: 40px; overflow: hidden; line-height: 1.3;">${shortDesc}</p>
                                <div class="row text-center mb-2">
                                    <div class="col-6">
                                        <small class="text-muted">粉丝</small>
                                        <div class="fw-bold text-primary">${formatNumber(fans)}</div>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">关注</small>
                                        <div class="fw-bold text-info">${formatNumber(follows)}</div>
                                    </div>
                                </div>
                                <div class="row text-center">
                                    <div class="col-6">
                                        <small class="text-muted">笔记</small>
                                        <div class="fw-bold text-success">${formatNumber(noteCount)}</div>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">总互动</small>
                                        <div class="fw-bold text-warning">${formatNumber(interaction)}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // 显示创作者详情
        function showCreatorDetail(userId) {
            currentCreatorId = userId;
            
            // 获取创作者信息
            fetch('/api/creators')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const creator = data.creators.find(c => c.user_id === userId);
                        if (creator) {
                            displayCreatorInfo(creator);
                        }
                    }
                });
            
            // 获取创作者的笔记
            fetch(`/api/creator/${userId}/notes`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayCreatorNotes(data.notes);
                    } else {
                        showError('加载笔记数据失败: ' + data.message);
                    }
                })
                .catch(error => {
                    showError('网络错误: ' + error.message);
                });
            
            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('creatorModal'));
            modal.show();
        }

        // 显示创作者基本信息
        function displayCreatorInfo(creator) {
            const avatar = creator.avatar || 'https://via.placeholder.com/100x100?text=头像';
            const nickname = creator.nickname || '未知用户';
            const desc = creator.desc || '暂无简介';
            const noteCount = creator.note_count || 0;
            const fans = creator.fans || 0;
            const follows = creator.follows || 0;
            const interaction = creator.interaction || 0;
            const gender = creator.gender || '未知';
            const location = creator.ip_location || '未知';
            const tagList = creator.tag_list || '[]';
            
            let tags = [];
            try {
                if (typeof tagList === 'string') {
                    tags = JSON.parse(tagList);
                } else if (Array.isArray(tagList)) {
                    tags = tagList;
                }
            } catch (e) {
                tags = [];
            }
            
            const tagsHtml = tags.length > 0 ? 
                tags.map(tag => `<span class="badge bg-secondary me-1">${tag}</span>`).join('') : 
                '<span class="text-muted">暂无标签</span>';
            
            document.getElementById('creatorInfo').innerHTML = `
                <div class="text-center mb-3">
                    <img src="${avatar}" alt="头像" class="rounded-circle" width="100" height="100" onerror="this.src='https://via.placeholder.com/100x100?text=头像'">
                    <h5 class="mt-2">${nickname}</h5>
                    <p class="text-muted small">${gender} · ${location}</p>
                </div>
                <div class="mb-3">
                    <strong>简介：</strong>
                    <p class="text-muted">${desc}</p>
                </div>
                <div class="row mb-3 text-center">
                    <div class="col-6">
                        <div class="fw-bold text-primary fs-4">${formatNumber(fans)}</div>
                        <small class="text-muted">粉丝</small>
                    </div>
                    <div class="col-6">
                        <div class="fw-bold text-info fs-4">${formatNumber(follows)}</div>
                        <small class="text-muted">关注</small>
                    </div>
                </div>
                <div class="row mb-3 text-center">
                    <div class="col-6">
                        <div class="fw-bold text-success">${formatNumber(noteCount)}</div>
                        <small class="text-muted">笔记数</small>
                    </div>
                    <div class="col-6">
                        <div class="fw-bold text-warning">${formatNumber(interaction)}</div>
                        <small class="text-muted">总互动</small>
                    </div>
                </div>
                <div class="mb-3">
                    <strong>标签：</strong><br>
                    ${tagsHtml}
                </div>
                <div class="mb-3">
                    <strong>数据更新时间：</strong>
                    <p class="text-muted">${creator.data_update_time || '未知'}</p>
                </div>
            `;
        }

        // 显示创作者笔记列表
        function displayCreatorNotes(notes) {
            const container = document.getElementById('notesList');
            const countElement = document.getElementById('notesCount');
            
            countElement.textContent = notes.length;
            
            if (notes.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4">
                        <i class="bi bi-journal-x" style="font-size: 2rem; color: #6c757d;"></i>
                        <p class="mt-2 text-muted">该创作者暂无笔记数据</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            notes.forEach(note => {
                const title = note.title || '无标题';
                const desc = note.desc || '暂无描述';
                const type = note.type || '未知';
                const likedCount = note.liked_count || '0';
                const collectedCount = note.collected_count || '0';
                const commentCount = note.comment_count || '0';
                const shareCount = note.share_count || '0';
                const time = note.time ? new Date(parseInt(note.time)).toLocaleString('zh-CN') : '未知时间';
                
                html += `
                    <div class="card mb-3 note-card" onclick="showNoteDetail('${note.note_id}')" style="cursor: pointer;">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h6 class="card-title mb-0">${title}</h6>
                                <span class="badge bg-info">${type}</span>
                            </div>
                            <p class="card-text text-muted small" style="max-height: 60px; overflow: hidden;">${desc}</p>
                            <div class="d-flex justify-content-around mt-3">
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-heart-fill text-danger me-1"></i>
                                    <span class="fw-bold text-danger">${formatNumber(likedCount)}</span>
                                    <small class="text-muted ms-1">点赞</small>
                                </div>
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-star-fill text-warning me-1"></i>
                                    <span class="fw-bold text-warning">${formatNumber(collectedCount)}</span>
                                    <small class="text-muted ms-1">收藏</small>
                                </div>
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-chat-fill text-info me-1"></i>
                                    <span class="fw-bold text-info">${formatNumber(commentCount)}</span>
                                    <small class="text-muted ms-1">评论</small>
                                </div>
                                <div class="d-flex align-items-center">
                                    <i class="bi bi-share-fill text-success me-1"></i>
                                    <span class="fw-bold text-success">${formatNumber(shareCount)}</span>
                                    <small class="text-muted ms-1">分享</small>
                                </div>
                            </div>
                            <div class="mt-2">
                                <small class="text-muted">
                                    <i class="bi bi-clock"></i> ${time}
                                </small>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // 显示笔记详情
        function showNoteDetail(noteId) {
            // 获取笔记详情
            fetch(`/api/creator/${currentCreatorId}/notes`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const note = data.notes.find(n => n.note_id === noteId);
                        if (note) {
                            displayNoteDetail(note);
                            currentNoteUrl = note.note_url;
                        }
                    }
                })
                .catch(error => {
                    showError('网络错误: ' + error.message);
                });
            
            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('noteModal'));
            modal.show();
        }

        // 显示笔记详细信息
        function displayNoteDetail(note) {
            const title = note.title || '无标题';
            const desc = note.desc || '暂无描述';
            const type = note.type || '未知';
            const likedCount = note.liked_count || '0';
            const collectedCount = note.collected_count || '0';
            const commentCount = note.comment_count || '0';
            const shareCount = note.share_count || '0';
            const time = note.time ? new Date(parseInt(note.time)).toLocaleString('zh-CN') : '未知时间';
            const lastUpdateTime = note.last_update_time ? new Date(parseInt(note.last_update_time)).toLocaleString('zh-CN') : '未知时间';
            const sourceKeyword = note.source_keyword || '无';
            const ipLocation = note.ip_location || '未知';
            
            let imageList = [];
            try {
                if (note.image_list && note.image_list.trim()) {
                    // 如果是字符串格式，按逗号分割
                    if (typeof note.image_list === 'string' && !note.image_list.startsWith('[')) {
                        imageList = note.image_list.split(',').map(url => url.trim()).filter(url => url);
                    } else {
                        imageList = JSON.parse(note.image_list || '[]');
                    }
                }
            } catch (e) {
                imageList = [];
            }
            
            // 更新当前图片列表
            currentImageList = imageList;
            
            let tagList = [];
            try {
                tagList = JSON.parse(note.tag_list || '[]');
            } catch (e) {
                tagList = [];
            }
            
            const imagesHtml = imageList.length > 0 ? 
                imageList.map((img, index) => `<img src="${img}" alt="笔记图片" class="img-thumbnail note-image me-2 mb-2 clickable-image" data-index="${index}" onclick="showImageCarousel(${index})" onerror="this.style.display='none'">`).join('') : 
                '<p class="text-muted">无图片</p>';
            
            const tagsHtml = tagList.length > 0 ? 
                tagList.map(tag => `<span class="badge bg-secondary me-1">${tag}</span>`).join('') : 
                '<span class="text-muted">无标签</span>';
            
            const videoHtml = note.video_url ? 
                `<div class="mb-3">
                    <strong>视频链接：</strong>
                    <a href="${note.video_url}" target="_blank" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-play-circle"></i> 观看视频
                    </a>
                </div>` : '';
            
            document.getElementById('noteDetail').innerHTML = `
                <div class="mb-3">
                    <h5>${title}</h5>
                    <span class="badge bg-info">${type}</span>
                </div>
                <div class="note-stats-container">
                    <div class="d-flex justify-content-around">
                        <div class="note-stats-item">
                            <i class="bi bi-heart-fill text-danger me-1"></i>
                            <span class="fw-bold text-danger">${formatNumber(likedCount)}</span>
                            <small class="text-muted ms-1">点赞</small>
                        </div>
                        <div class="note-stats-item">
                            <i class="bi bi-star-fill text-warning me-1"></i>
                            <span class="fw-bold text-warning">${formatNumber(collectedCount)}</span>
                            <small class="text-muted ms-1">收藏</small>
                        </div>
                        <div class="note-stats-item">
                            <i class="bi bi-chat-fill text-info me-1"></i>
                            <span class="fw-bold text-info">${formatNumber(commentCount)}</span>
                            <small class="text-muted ms-1">评论</small>
                        </div>
                        <div class="note-stats-item">
                            <i class="bi bi-share-fill text-success me-1"></i>
                            <span class="fw-bold text-success">${formatNumber(shareCount)}</span>
                            <small class="text-muted ms-1">分享</small>
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <strong>描述：</strong>
                    <p>${desc}</p>
                </div>
                ${videoHtml}
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <strong>图片：</strong>
                        <div class="d-flex align-items-center">
                            <label for="imageSizeSlider" class="form-label me-2 mb-0" style="font-size: 0.9em;">大小调节：</label>
                            <input type="range" class="form-range" id="imageSizeSlider" min="20" max="200" value="100" style="width: 120px;" oninput="adjustImageSize(this.value)">
                            <span id="imageSizeValue" class="ms-2" style="font-size: 0.8em; color: #666; min-width: 35px;">100%</span>
                        </div>
                    </div>
                    <div class="d-flex flex-wrap" id="imageContainer">
                        ${imagesHtml}
                    </div>
                </div>
                <div class="mb-3">
                    <strong>标签：</strong><br>
                    ${tagsHtml}
                </div>
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>发布时间：</strong> ${time}
                    </div>
                    <div class="col-6">
                        <strong>更新时间：</strong> ${lastUpdateTime}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>来源关键词：</strong> ${sourceKeyword}
                    </div>
                    <div class="col-6">
                        <strong>IP位置：</strong> ${ipLocation}
                    </div>
                </div>
            `;
        }

        // 打开笔记原链接
        document.getElementById('openNoteBtn').addEventListener('click', function() {
            if (currentNoteUrl) {
                window.open(currentNoteUrl, '_blank');
            } else {
                alert('暂无链接信息');
            }
        });

        // 刷新创作者数据
        function refreshCreators() {
            document.getElementById('creatorsContainer').innerHTML = `
                <div class="text-center py-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">加载中...</span>
                    </div>
                    <p class="mt-2">正在刷新数据...</p>
                </div>
            `;
            loadCreators();
        }

        // 格式化数字显示
        function formatNumber(num) {
            // 如果输入为空或undefined，返回0
            if (!num && num !== 0) {
                return '0';
            }
            
            // 转换为字符串
            const str = String(num);
            
            // 如果已经包含中文单位（万、千等），直接返回
            if (str.includes('万') || str.includes('千') || str.includes('k') || str.includes('w')) {
                return str;
            }
            
            // 尝试转换为数字
            const number = parseInt(str) || 0;
            if (number >= 10000) {
                return (number / 10000).toFixed(1) + '万';
            } else if (number >= 1000) {
                return (number / 1000).toFixed(1) + '千';
            }
            return number.toString();
        }



        // 显示图片轮播
        function showImageCarousel(startIndex = 0) {
            if (currentImageList.length === 0) {
                alert('没有可预览的图片');
                return;
            }
            
            // 构建轮播内容
            const carouselInner = document.getElementById('carouselInner');
            let carouselHtml = '';
            
            currentImageList.forEach((img, index) => {
                const activeClass = index === startIndex ? 'active' : '';
                carouselHtml += `
                    <div class="carousel-item ${activeClass}">
                        <div class="carousel-image-container">
                            <img src="${img}" class="carousel-image" alt="笔记图片 ${index + 1}" onerror="this.src='https://via.placeholder.com/400x300?text=图片加载失败'">
                        </div>
                    </div>
                `;
            });
            
            carouselInner.innerHTML = carouselHtml;
            
            // 更新图片计数器
            updateImageCounter(startIndex + 1);
            
            // 显示模态框
            const modal = new bootstrap.Modal(document.getElementById('imageCarouselModal'));
            modal.show();
            
            // 监听轮播切换事件，更新计数器
            const carousel = document.getElementById('imageCarousel');
            carousel.addEventListener('slid.bs.carousel', function(event) {
                updateImageCounter(event.to + 1);
            });
        }
        
        // 更新图片计数器
        function updateImageCounter(current) {
            const counter = document.getElementById('imageCounter');
            counter.textContent = `${current} / ${currentImageList.length}`;
        }
        
        // 调整图片大小
        function adjustImageSize(value) {
            const imageContainer = document.getElementById('imageContainer');
            const imageSizeValue = document.getElementById('imageSizeValue');
            
            if (imageContainer && imageSizeValue) {
                // 更新显示的百分比值
                imageSizeValue.textContent = value + '%';
                
                // 获取所有图片元素
                const images = imageContainer.querySelectorAll('.note-image');
                
                // 动态调整图片的最大宽度和最大高度，使用setProperty来设置!important
                images.forEach(img => {
                    const scale = value / 100;
                    img.style.setProperty('max-width', (500 * scale) + 'px', 'important');
                    img.style.setProperty('max-height', (800 * scale) + 'px', 'important');
                    img.style.setProperty('min-width', Math.max(200 * scale, 100) + 'px', 'important');
                });
            }
        }

        // 显示错误信息
        function showError(message) {
            document.getElementById('creatorsContainer').innerHTML = `
                <div class="alert alert-danger" role="alert">
                    <i class="bi bi-exclamation-triangle"></i>
                    ${message}
                </div>
            `;
        }
    </script>

    <style>
        .creator-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .note-card:hover {
            background-color: #f8f9fa;
            transition: background-color 0.3s ease;
        }
        
        .img-thumbnail {
            transition: all 0.3s ease;
        }
        
        .img-thumbnail:hover {
            opacity: 0.8;
        }
        
        .clickable-image {
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .clickable-image:hover {
            border-color: #007bff;
            transform: scale(1.05);
        }
        
        .carousel-control-prev,
        .carousel-control-next {
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .carousel-control-prev {
            left: 20px;
        }
        
        .carousel-control-next {
            right: 20px;
        }
        
        .carousel-image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 60vh;
            max-height: 85vh;
            width: 100%;
            padding: 20px;
        }
        
        .carousel-image {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .carousel-image-container {
                min-height: 50vh;
                max-height: 70vh;
                padding: 10px;
            }
        }
        
        @media (max-width: 576px) {
            .carousel-image-container {
                min-height: 40vh;
                max-height: 60vh;
                padding: 5px;
            }
        }
        
        /* 大屏幕优化 */
         @media (min-width: 1200px) {
             .carousel-image-container {
                 min-height: 70vh;
                 max-height: 90vh;
             }
         }
         
         /* 页码计数器样式 */
         .image-counter-top {
             position: absolute;
             top: 20px;
             left: 20px;
             z-index: 1050;
             background-color: rgba(0, 0, 0, 0.7);
             color: white;
             padding: 8px 16px;
             border-radius: 20px;
             font-size: 14px;
         }
         
         /* 模态框头部样式调整 */
         #imageCarouselModal .modal-header {
             position: absolute;
             top: 10px;
             right: 10px;
             z-index: 1051;
             background: none;
         }
         
         #imageCarouselModal .btn-close {
             background-color: rgba(0, 0, 0, 0.7);
             border-radius: 50%;
             padding: 8px;
             opacity: 0.8;
         }
         
         #imageCarouselModal .btn-close:hover {
             opacity: 1;
         }
    </style>
</body>
</html>